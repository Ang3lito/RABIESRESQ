<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Patient Registration - RabiesResQ</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="min-h-screen bg-slate-50 text-slate-900">
    {% set f = form if form is defined else {} %}

    <div class="min-h-screen lg:grid lg:grid-cols-2">
      <!-- Left image panel (matches login theme) -->
      <div class="relative hidden lg:block lg:sticky lg:top-0 lg:h-screen">
        <div
          class="absolute inset-0 bg-cover bg-center"
          style="background-image: url('https://images.unsplash.com/photo-1517849845537-4d257902454a?auto=format&fit=crop&w=1600&q=80');"
        ></div>
        <div class="absolute inset-0 bg-slate-900/40"></div>
        <div class="relative flex h-full items-center">
          <div class="px-14">
            <h1 class="text-4xl font-bold tracking-tight text-white">RabiesResQ Clinic</h1>
            <p class="mt-3 max-w-md text-lg text-white/90">
              Dedicated to the health and safety of our community.
            </p>
          </div>
        </div>
      </div>

      <!-- Right form panel -->
      <div class="flex min-h-screen items-center justify-center px-6 py-10 lg:px-12 lg:h-screen lg:overflow-y-auto lg:items-start">
        <div class="w-full max-w-2xl">
          <div class="text-center">
            <div class="text-2xl font-semibold text-slate-900">RabiesResQ</div>
            <div class="mt-2 text-4xl font-extrabold tracking-tight text-slate-900">Patient Sign Up</div>
            <p class="mt-3 text-base text-slate-600">Create your RabiesResQ patient account.</p>
          </div>

          <div class="mt-8 rounded-2xl border border-slate-200 bg-white p-8 shadow-lg shadow-slate-200/60">
            {% include "_flash.html" %}

            <form class="space-y-8" method="post" action="{{ url_for('auth.register_post') }}">
              <section>
                <h2 class="text-sm font-extrabold uppercase tracking-wide text-slate-900">Account Info</h2>
                <div class="mt-4 grid grid-cols-1 gap-4 md:grid-cols-2">
                  <div>
                    <label class="block text-sm font-semibold text-slate-800">Username <span class="text-rose-600">*</span></label>
                    <input
                      class="mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200"
                      type="text"
                      name="username"
                      value="{{ f.get('username','') }}"
                      placeholder="Enter your username"
                      required
                      autocomplete="username"
                    />
                  </div>

                  <div>
                    <label class="block text-sm font-semibold text-slate-800">Email <span class="text-rose-600">*</span></label>
                    <input
                      class="mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200"
                      type="email"
                      name="email"
                      value="{{ f.get('email','') }}"
                      placeholder="Enter your email"
                      required
                      autocomplete="email"
                    />
                  </div>

                  <div>
                    <label class="block text-sm font-semibold text-slate-800">Password <span class="text-rose-600">*</span></label>
                    <div class="relative mt-2">
                      <input
                        id="reg-password"
                        class="w-full rounded-xl border border-slate-200 bg-white px-4 py-3 pr-12 text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200"
                        type="password"
                        name="password"
                        placeholder="Create a password"
                        required
                        autocomplete="new-password"
                      />
                      <button type="button" class="absolute inset-y-0 right-0 flex items-center pr-4 text-slate-500 hover:text-slate-700 cursor-pointer" aria-label="Toggle password visibility" data-toggle-password="reg-password">
                        <svg class="eye-open h-5 w-5 hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                          <path d="M10 3c-4.5 0-8.2 2.9-9.5 7 1.3 4.1 5 7 9.5 7s8.2-2.9 9.5-7C18.2 5.9 14.5 3 10 3zm0 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8z" />
                          <path d="M10 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" />
                        </svg>
                        <svg class="eye-closed h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                          <path fill-rule="evenodd" d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z" clip-rule="evenodd" />
                          <path d="M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z" />
                        </svg>
                      </button>
                    </div>
                  </div>

                  <div>
                    <label class="block text-sm font-semibold text-slate-800">Confirm Password <span class="text-rose-600">*</span></label>
                    <div class="relative mt-2">
                      <input
                        id="reg-confirm-password"
                        class="w-full rounded-xl border border-slate-200 bg-white px-4 py-3 pr-12 text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200"
                        type="password"
                        name="confirm_password"
                        placeholder="Confirm your password"
                        required
                        autocomplete="new-password"
                      />
                      <button type="button" class="absolute inset-y-0 right-0 flex items-center pr-4 text-slate-500 hover:text-slate-700 cursor-pointer" aria-label="Toggle password visibility" data-toggle-password="reg-confirm-password">
                        <svg class="eye-open h-5 w-5 hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                          <path d="M10 3c-4.5 0-8.2 2.9-9.5 7 1.3 4.1 5 7 9.5 7s8.2-2.9 9.5-7C18.2 5.9 14.5 3 10 3zm0 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8z" />
                          <path d="M10 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" />
                        </svg>
                        <svg class="eye-closed h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                          <path fill-rule="evenodd" d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z" clip-rule="evenodd" />
                          <path d="M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z" />
                        </svg>
                      </button>
                    </div>
                  </div>
                </div>
              </section>

              <section>
                <h2 class="text-sm font-extrabold uppercase tracking-wide text-slate-900">Patient Info</h2>
                <div class="mt-4 grid grid-cols-1 gap-4 md:grid-cols-2">
                  <div>
                    <label class="block text-sm font-semibold text-slate-800">First Name</label>
                    <input class="mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200" type="text" name="first_name" value="{{ f.get('first_name','') }}" placeholder="First name" />
                  </div>
                  <div>
                    <label class="block text-sm font-semibold text-slate-800">Last Name</label>
                    <input class="mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200" type="text" name="last_name" value="{{ f.get('last_name','') }}" placeholder="Last name" />
                  </div>
                  <div>
                    <label class="block text-sm font-semibold text-slate-800">Phone Number</label>
                    <input class="mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200" type="text" name="phone_number" value="{{ f.get('phone_number','') }}" placeholder="Phone number" />
                  </div>
                  <div>
                    <label class="block text-sm font-semibold text-slate-800">Date of Birth</label>
                    <input class="mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200" type="date" name="date_of_birth" value="{{ f.get('date_of_birth','') }}" />
                  </div>
                  <div class="md:col-span-2">
                    <label class="block text-sm font-semibold text-slate-800">Address</label>
                    <input class="mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200" type="text" name="address" value="{{ f.get('address','') }}" placeholder="Address" />
                  </div>
                  <div>
                    <label class="block text-sm font-semibold text-slate-800">Age</label>
                    <input class="mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200" type="number" name="age" min="0" value="{{ f.get('age','') }}" placeholder="Age" />
                  </div>
                  <div>
                    <label class="block text-sm font-semibold text-slate-800">Gender</label>
                    <select class="mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-slate-900 shadow-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200" name="gender">
                      {% set gval = f.get('gender','') %}
                      <option value="" {% if not gval %}selected{% endif %}>Select (optional)</option>
                      <option value="Male" {% if gval == 'Male' %}selected{% endif %}>Male</option>
                      <option value="Female" {% if gval == 'Female' %}selected{% endif %}>Female</option>
                      <option value="Other" {% if gval == 'Other' %}selected{% endif %}>Other</option>
                    </select>
                  </div>
                </div>
              </section>

              <div class="flex flex-col-reverse items-center justify-between gap-4 pt-2 md:flex-row">
                <a class="text-sm font-semibold text-slate-700 hover:text-slate-900" href="{{ url_for('auth.login') }}">Back to login</a>
                <button
                  class="w-full rounded-xl bg-emerald-500 px-4 py-3 text-base font-semibold text-white shadow-sm hover:bg-emerald-600 focus:outline-none focus:ring-4 focus:ring-emerald-200 md:w-auto"
                  type="submit"
                >
                  Create account
                </button>
              </div>
            </form>
          </div>

          <div class="mt-10 text-center text-sm text-slate-500">
            Â© 2026 RabiesResQ. All rights reserved.
          </div>
        </div>
      </div>
    </div>
    <script>
      document.querySelectorAll('[data-toggle-password]').forEach(function(btn) {
        btn.addEventListener('click', function() {
          var id = this.getAttribute('data-toggle-password');
          var input = document.getElementById(id);
          var open = this.querySelector('.eye-open');
          var closed = this.querySelector('.eye-closed');
          if (input.type === 'password') {
            input.type = 'text';
            open.classList.remove('hidden');
            closed.classList.add('hidden');
          } else {
            input.type = 'password';
            open.classList.add('hidden');
            closed.classList.remove('hidden');
          }
        });
      });
    </script>
  </body>
</html>

